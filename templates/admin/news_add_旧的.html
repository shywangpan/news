<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<script language="javascript" src="../static/js/jquery-3.1.1.js">
</script>
<script >
var right_type=new Array(".gif",".jpg",".jpeg",".png"); 
function checkImgType(fileURL) 
{ 
	//本程序用来验证后缀，如果还有其它格式，可以添加在right_type; 
	var right_typeLen=right_type.length; 
	var imgUrl=fileURL.toLowerCase(); 
	var postfixLen=imgUrl.length; 
	var len4=imgUrl.substring(postfixLen-4,postfixLen); 
	var len5=imgUrl.substring(postfixLen-5,postfixLen); 
	for (i=0;i <right_typeLen;i++) 
		{ 
			if((len4==right_type[i])||(len5==right_type[i])) 
			{ 
				return true; 
			} 
		} 
}
function changeSrc(filePicker) 
{ 
	if(!checkImgType(filePicker.value)) 
	{ 
		alert("请上传正确格式/gif/jpg/jpeg/png！"); 
		return false; 
	}
	return true;
}
</script>
<body>
<h1><a href="index.php">首页</a></h1>
<h3><a href="news.php?act=list">新闻列表</a></h3>
<table>
  <form action="news.php?act=add&id={$news.id}" method="post"  enctype="multipart/form-data" onSubmit=" return check_sub();">
    <tr>
        <td>
          <select name="cid" id="cid">
              <option value="0">请选择新闻分类</option>  
              {$option}
          </select>
      </td>
    </tr>
    <tr>
        <td>新闻标题:</td>
        <td><input type="text" name="title" id="title" value="{$news.title}"></td>
    </tr>
    <tr>
        <td>新闻简介:</td>
        <td><textarea name="info" id="info" cols="20" rows="6" >{$news.info}</textarea>  </td>  
   </tr>  
        <tr>
        <td>新闻logo:</td>
        <td><input type="file" name="logo" id="logo" onChange="changeSrc(this)"> </td> 
    </tr> 
     <tr>
        <td>新闻内容:</td>
        <td>{$FCKeditor}</td>
    </tr>
    <tr>
       <td><input type="submit" value="保存"></td>
    </tr>
  </form>
</table> 

</body>
{literal}
<script>
完全
function check_sub(){
	if ($('#cid').val() == 0){
	 alert('请选择新闻分类')
	 return false;
	}
	if (($.trim($('#title').val()) == '')){
	 alert('新闻标题不能为空');
	 return false;
	}
	if (($.trim($('#info').val()) == '')){
	 alert('新闻简介不能为空');
	 return false;
	}
	if (($.trim($('#logo').val()) == '')){
	 alert('图片不能为空');
	 return false;
	}
return true
}
</script>

{/literal}
</html>